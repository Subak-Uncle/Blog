>>"í•´ë‹¹ ê¸€ì€ `Real MySQL 8.0`ì˜ ë‚´ìš©ì„ í† ëŒ€ë¡œ ì‘ì„±ë˜ì—ˆìŒì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤."
>
>MySQLì˜ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
>![](/Users/kimjong-wan/workspace/Blog/TodayILearned/Database/images/MySQL Lock/image-20240225234649465.png)
>MySQLì€ ë™ì‹œì„± ì œì–´ë¥¼ ìœ„í•´ ê° ì—”ì§„ ë³„ë¡œ `MySQL ì—”ì§„ Lock` ê³¼ `ìŠ¤í† ë¦¬ì§€ ì—”ì§„ Lock`ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•©ë‹ˆë‹¤.
>
># ì‹¤ìŠµ í™˜ê²½
>ì•„ë˜ì—ì„œ ì‹œí–‰ë  ì‹¤ìŠµì€ ë‹¤ìŒê³¼ ê°™ì€ í™˜ê²½ì—ì„œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
>ì¼ì „ì— ë§Œë“¤ì–´ë‘ê¸°ë§Œ í–ˆë˜ í…ŒìŠ¤íŠ¸ìš© `movie DataBase`ë¥¼ ì´ìš©í•˜ê² ìŠµë‹ˆë‹¤. ê·¸ ì™¸ ì‹¤ìŠµìš©ì„ ë‹¤ìš´ ë°›ìœ¼ì‹œë ¤ë©´, [ìƒ˜í”Œ ë°ì´í„°](https://github.com/datacharmer/test_db)ë¥¼ ì´ìš©í•´ì£¼ì„¸ìš”.
>![](/Users/kimjong-wan/workspace/Blog/TodayILearned/Database/images/MySQL Lock/image-20240225234649230.png)
>
>![](/Users/kimjong-wan/workspace/Blog/TodayILearned/Database/images/MySQL Lock/image-20240225234650057.png)
>
>![](/Users/kimjong-wan/workspace/Blog/TodayILearned/Database/images/MySQL Lock/image-20240225234649257.png)
>
>
>
># ğŸ“‹ MySQL ì—”ì§„ ë½(Lock)
>ìŠ¤í† ë¦¬ì§€ ì—”ì§„ì€ ë…ë¦½ì ìœ¼ë¡œ ë½ì„ ê´€ë¦¬í•˜ì§€ë§Œ, MySQL ì—”ì§„ ë ˆë²¨ ë½ì€ ëª¨ë“  ìŠ¤í† ë¦¬ì§€ ì—”ì§„ì— ì˜í–¥ì„ ë¼ì¹©ë‹ˆë‹¤.
>
>## ğŸ“Œ 1. ê¸€ë¡œë²Œ ë½(Global Lock)
>- ì„œë²„ ì „ì²´ì˜ ë²”ìœ„ë¥¼ ì ê¸ˆ
>- ëª¨ë“  DDLê³¼ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” SELECTë¥¼ ì œì™¸í•œ DMLì˜ ì‹¤í–‰ì„ ê¸ˆì§€í•©ë‹ˆë‹¤.
>(ë‹¤ë¥¸ ì„¸ì…˜ì˜ DDLê³¼ SELECTë¬¸ì„ ì œì™¸í•œ DMLì˜ ì‹¤í–‰ì„ ê¸ˆì§€í•©ë‹ˆë‹¤.)
>- ê¸€ë¡œë²Œ ë½ì˜ ì˜í–¥ ë²”ìœ„ëŠ” MySQL ì„œë²„ ì „ì²´ì´ë©°, ì‘ì—… ëŒ€ìƒ í…Œì´ë¸”ì´ë‚˜ DBê°€ ë‹¤ë¥´ë”ë¼ë„ ë™ì¼í•˜ê²Œ ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.
>- ëª¨ë“  ì„œë²„ì— ë½ì„ ì‹¤í–‰í•˜ê¸° ë•Œë¬¸ì— ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.
>(ì‹¤ì œë¡œ MySQLì—ì„  ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)
>- MySQL 8.0ë¶€í„° `Xtrabackup`, `Enterprise Backup` ê°™ì´ 'ë°±ì—… ë½'ì´ë¼ëŠ”, ì¢€ ë” ê°€ë²¼ìš´ ê°œë…ì˜ ë½ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. 
>  - ë½ íšë“:`LOCK INSTANCE FOR BACKUP`, ë½ í•´ì œ : `UNLOCK INSTANCE`
>
>- `FLUSH TABLES WITH READ LOCK` ëª…ë ¹ì„ í†µí•´ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>- í•´ì œëŠ” `UNLOCK TABLES` ëª…ë ¹ì„ í†µí•´ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
>```sql
>mysql> insert into tbl_actor(actor_name, actor_gender, actor_age) values ('ê¹€ì¢… ì™„', 'ë‚¨', 26);
>Query OK, 1 row affected (0.01 sec)
>
>mysql> select * from tbl_actor;
>+----------+------------+--------------+-----------+
>| actor_no | actor_name | actor_gender | actor_age |
>+----------+------------+--------------+-----------+
>|        1 | ê¹€ì¢…ì™„     | ë‚¨           |        26 |
>+----------+------------+--------------+-----------+
>1 row in set (0.01 sec)
>
>mysql> FLUSH TABLES WITH READ LOCK;
>Query OK, 0 rows affected (0.01 sec)
>
>mysql> insert into tbl_actor(actor_name, actor_gender, actor_age) values ('ê¹€ì¢… ì™„', 'ë‚¨', 26);
>ERROR 1223 (HY000): Can't execute the query because you have a conflicting read lock
>mysql> select * from tbl_actor;
>+----------+------------+--------------+-----------+
>| actor_no | actor_name | actor_gender | actor_age |
>+----------+------------+--------------+-----------+
>|        1 | ê¹€ì¢…ì™„     | ë‚¨           |        26 |
>+----------+------------+--------------+-----------+
>1 row in set (0.00 sec)
>
>mysql> UNLOCK TABLES;
>Query OK, 0 rows affected (0.00 sec)
>```
>
>
>## ğŸ“Œ 2. í…Œì´ë¸” ë½(Table Lock)
>- ê°œë³„ í…Œì´ë¸” ë‹¨ìœ„ë¡œ ì„¤ì •ë˜ëŠ” ì ê¸ˆì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
>- ìŠ¤í† ë¦¬ì§€ ì—”ì§„ì— ë”°ë¼ `ëª…ì‹œì  Lock` ê³¼ `ë¬µì‹œì  Lock`ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.
>  - ëª…ì‹œì  Lock : InnoDB
>    - `LOCK TABLES table_name [ READ | WRITE ]` ëª…ë ¹ìœ¼ë¡œ í…Œì´ë¸” ë½ì„ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>    - í•´ì œëŠ” `UNLOCK TABLES` ëª…ë ¹ì„ í†µí•´ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>    - ìë™ ì»¤ë°‹ì´ ìœ ë°œë˜ë¯€ë¡œ, ê¸€ë¡œë²Œ ë½ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì‹¤ì œë¡œëŠ” ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
>    - InnoDBì—ì„œëŠ” ë ˆì½”ë“œ ë ˆë²¨ì˜ í…Œì´ë¸” ë½ì´ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ `DDL`ì— ëŒ€í•´ì„  ìë™ìœ¼ë¡œ ë½(Lock)ì´ ê±¸ë ¤ ìˆëŠ” ìƒíƒœì´ê³ , `DML`ì— ëŒ€í•´ì„  ë³„ë„ì˜ í…Œì´ë¸” ë½ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.
>  - ë¬µì‹œì  Lock : MyISAM, Memory
>    - í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ë©´ ìë™ìœ¼ë¡œ í…Œì´ë¸” ë½ì´ ì„¤ì •ë˜ê³ , ì™„ë£Œ ì‹œì— ìë™ìœ¼ë¡œ í•´ì œë©ë‹ˆë‹¤.
>
>### ğŸˆ LOCK TABLES ~ READ
>- í•´ë‹¹ ì„¸ì…˜ì€ messages í…Œì´ë¸”ì„ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (SELECT ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ).
>- ë‹¤ë¥¸ ì„¸ì…˜ë“¤ë„ messages í…Œì´ë¸”ì„ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (SELECT ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ).
>- ê·¸ëŸ¬ë‚˜, í•´ë‹¹ ì„¸ì…˜ì„ í¬í•¨í•œ ì–´ë–¤ ì„¸ì…˜ë„ messages í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (ì˜ˆ: INSERT, UPDATE, DELETE ëª…ë ¹ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ).
>![](/Users/kimjong-wan/workspace/Blog/TodayILearned/Database/images/MySQL Lock/image-20240225234649262.gif)
>
>
>
>
>### ğŸˆ LOCK TABLES ~ WRITE
>- í•´ë‹¹ ì„¸ì…˜ì€ messages í…Œì´ë¸”ì— ëŒ€í•´ ë°ì´í„°ë¥¼ ì½ê¸°, ë³€ê²½(ì˜ˆ: INSERT, UPDATE, DELETE)í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>- ë‹¤ë¥¸ ì„¸ì…˜ì€ í…Œì´ë¸”ì— ëŒ€í•œ ì½ê¸° ë° ì“°ê¸° ì‘ì—…ì´ ë¶ˆê°€ëŠ¥í•˜ê²Œ ë˜ì–´ ì´ ì„¸ì…˜ì˜ ë½ì´ í•´ì œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•©ë‹ˆë‹¤
>![](/Users/kimjong-wan/workspace/Blog/TodayILearned/Database/images/MySQL Lock/image-20240225234649546.gif)
>
>
>## ğŸ“Œ 3. ë„¤ì„ë“œ ë½(Named Lock)
>- ì„ì˜ì˜ ë¬¸ìì—´ì— ëŒ€í•´ ì ê¸ˆì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
>  - ê³ ìœ í•œ ì´ë¦„ í˜¹ì€ ë¬¸ìë¡œ ì„¤ì •ì„ í•˜ê³ , ê·¸ ì´ë¦„ìœ¼ë¡œ ì ê¸ˆì„ íšë“í•˜ê±°ë‚˜ í•´ì œí•©ë‹ˆë‹¤.
>  - ë¶„ì‚° ë½ì´ë¼ê³ ë„ ë¶ˆë¦¬ë©° íŠ¹ì • ì‘ì—…ë“¤ì´ ì„œë¡œ ê°„ì„­í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
>- MySQL ì„œë²„ì˜ ë©”ëª¨ë¦¬ì— ì§ì ‘ ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì— ì˜¤ë²„í—¤ë“œê°€ ì ê³  ë¹ ë¥¸ í¸ ì…ë‹ˆë‹¤.
>- íŠ¸ëœì­ì…˜ê³¼ëŠ” ë³„ê°œë¡œ ë™ì‘ë˜ì–´ í•´ì œë„ ì§ì ‘ ì‹¤í–‰í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.
>- ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€
>  - [ìš°ì•„í•œ ê¸°ìˆ  ë¸”ë¡œê·¸ - ê´‘ê³  ì‹œìŠ¤í…œ í™œìš©ì„ ìœ„í•œ ë¶„ì‚° ë½](https://techblog.woowahan.com/2631/)
>  - ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë™ì‹œì ìœ¼ë¡œ ìš”ì²­í•´ MySQL ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ë•Œ, ê³µìœ  ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ë™ê¸°í™”í•´ì•¼ í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
>- ì‚¬ìš© ë¬¸ë²•
>  - `GET_LOCK('lock_name', timeout)`
>     - lock_name : ì„¤ì • ê³ ìœ  ì´ë¦„, timeout : ì ê¸ˆ ì‹œê°„ ì„¤ì •(ìŒìˆ˜ ì„¤ì • ì‹œ ì ê¸ˆì„ íšë“í•  ë•Œê¹Œì§€ ë¬´í•œëŒ€ë¡œ ëŒ€ê¸°í•˜ê²Œ ë©ë‹ˆë‹¤.)
>     - í•˜ë‚˜ì˜ ì„¸ì…˜ì´ ì ê¸ˆì„ ìœ ì§€í•˜ê³  ìˆìœ¼ë©´ ë‹¤ë¥¸ ì„¸ì…˜ì€ ë™ì¼í•œ ì ê¸ˆì„ íšë“í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
>     - ê²°ê³¼ ê°’ì€ 1(ì„±ê³µ), 0(ì‹¤íŒ¨), null(ì—ëŸ¬ ë°œìƒ) ì„ ë°˜í™˜
>     - 5.7ë²„ì „ ì´ìƒë¶€í„´ ë™ì‹œì— ì—¬ëŸ¬ ë„¤ì„ë“œ ë½ ê°€ëŠ¥, ì„¤ì • ê³ ìœ  ì´ë¦„ ê¸¸ì´ 60ì ì œí•œ
>  - `RELEASE LOCK('lock_name')`
>    - í•´ë‹¹ lock_nameì— ëŒ€í•œ ë„¤ì„ë“œ ë½ í•´ì œ
>    - ê²°ê³¼ ê°’ì€ 1(ì„±ê³µ), 0(ì‹¤íŒ¨, í˜„ì¬ ìŠ¤ë ˆë“œì—ì„œ ë¯¸ì‚¬ìš© ì ê¸ˆ), null(í•´ë‹¹ ì ê¸ˆ ë¯¸ì¡´ì¬)
>  - `RELEASE ALL LOCKS()`
>    - í˜„ì¬ ì„¸ì…˜ì—ì„œ ìœ ì§€ ì¤‘ì¸ ëª¨ë“  ë„¤ì„ë“œ ë½ í•´ì œ í›„ í•´ì œ ê°¯ìˆ˜ ë°˜í™˜
>  - `IS_FREE_LOCK('lock_name')`
>    - í•´ë‹¹ lock nameì— ëŒ€í•´ì„œ ì ê¸ˆ íšë“ì´ ê°€ëŠ¥í•œ ì§€ ì—¬ë¶€ ë°˜í™˜
>    - ê²°ê³¼ ê°’ìœ¼ë¡œ 1(í•´ë‹¹ ì´ë¦„ì˜ ì ê¸ˆì´ ì—†ì„ ë•Œ), 0(í•´ë‹¹ ì´ë¦„ì˜ ì ê¸ˆì´ ì¡´ì¬), null(ì—ëŸ¬ ë°œìƒ)
>  - `IS_USED_LOCK('lock_name')`
>    - í•´ë‹¹ lock nameì— ëŒ€í•´ì„œ ì ê¸ˆì´ ì‚¬ìš© ì¤‘ì¸ ì§€ í™•ì¸
>    - ì‚¬ìš© ì¤‘ì´ë¼ë©´ connection Idë¥¼, ë¯¸ì‚¬ìš© ì¤‘ì´ë¼ë©´ null ë°˜í™˜
>  
>
>## ğŸ“Œ 4. ë©”íƒ€ë°ì´í„° ë½(MetaData Lock)
>- í…Œì´ë¸”, ë·° ë“± DB ê°ì²´ì˜ ì´ë¦„ì´ë‚˜ êµ¬ì¡°ë¥¼ ë³€ê²½í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì ê¸ˆì…ë‹ˆë‹¤.
>- ëª…ë ¹ì–´ë¥¼ ì‘ì„±í•˜ì—¬ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, í…Œì´ë¸”ì´ë‚˜ ë·°ì˜ ì´ë¦„ í˜¹ì€ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ëŠ” ê²½ìš°ì— ìë™ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
>
># ğŸ“‹ ìŠ¤í† ë¦¬ì§€ ì—”ì§„ ë½(Lock)
>**MyISAM, MEMORY, ARCHIVE ë“±ì˜** ìŠ¤í† ë¦¬ì§€ ì—”ì§„ì€ ìì²´ì ì¸ ë½ì„ ê°€ì§€ì§€ ì•Šê³  MySQLì—ì„œ ì œê³µí•´ì£¼ëŠ” í…Œì´ë¸” ë½ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. íŠ¸ëœì­ì…˜ì´ ì—†ì–´ ì¿¼ë¦¬ ë‹¨ìœ„ë¡œ í•„ìš”í•œ ë½ì„ íšë“í•˜ê¸° ë•Œë¬¸ì— ë°ë“œë½ì´ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ, ê·¸ë§Œí¼ ë™ì‹œì„± ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í•´ë‹¹ ìŠ¤í† ë¦¬ì§€ ì—”ì§„ë“¤ì€ í…Œì´ë¸” ë½ ì¤‘ ë¬µì‹œì  ë½ì— ì†í•˜ë©° ì¿¼ë¦¬ë¬¸ ì‹¤í–‰ ì‹œ ìë™ì ìœ¼ë¡œ í…Œì´ë¸” ë‹¨ìœ„ì˜ ë½ì´ ì ìš©ë©ë‹ˆë‹¤.
>
>**InnoDB** ìŠ¤í† ë¦¬ì§€ ì—”ì§„ì€ **ì¸ë±ìŠ¤ì˜ ë ˆì½”ë“œ ê¸°ë°˜ ë½**ì„ ì‚¬ìš©í•˜ì—¬ ê¸°ì¡´ì˜ ìŠ¤í† ë¦¬ì§€ ì—”ì§„ ë³´ë‹¤ ë™ì‹œì„± ì²˜ë¦¬ê°€ ë›°ì–´ë‚©ë‹ˆë‹¤. 
>
>ë½ì— ëŒ€í•œ ì •ë³´ ì¡°íšŒëŠ” MySQL 5.1ë²„ì „ë¶€í„° ì œê³µëœ `INFORMATION_SCHEMA`ì˜ `INNODB_TRX`, `INNODB_LOCKS`, `INNODB_LOCK_WAITS` í…Œì´ë¸”ì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. í˜„ì¬ ì–´ë–¤ íŠ¸ëœì­ì…˜ì´ ì–´ë– í•œ ë½ì„ ê°€ì§€ê³  ìˆëŠ” ì§€, ì¥ì‹œê°„ ë½ì„ ê°€ì§€ê³  ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ì¢…ë£Œì‹œí‚¤ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
>
>InnoDBì˜ ë½ì˜ ì¢…ë¥˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
>
>## ğŸ“Œ 1. ê³µìœ  ë½ / ë°°íƒ€ ë½(Shared Lock / Exclusive Lock)
>- ë¹„ê´€ì  ë½(Pessimistic Locking) ë°©ì‹ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
>- ë ˆì½”ë“œ ë ˆë²¨ì˜ ë½ ì…ë‹ˆë‹¤.
>
>### ğŸˆ ê³µìœ  ë½(Shared Lock, Lock-S)
>- ë ˆì½”ë“œ ë ˆë²¨ì—ì„œ `ì½ê¸°(Select)`ì— ëŒ€í•œ ë½ì…ë‹ˆë‹¤. ì“°ê¸° ì—°ì‚°ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
>  - `SELECT FOR SHARE` ë¥¼ ì‚¬ìš©í•˜ì—¬ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>  ```sql
>  SELECT * FROM table_name WHERE id = 1 FOR SHARE;
>  -- or
>  SELECT * FROM table_name WHERE id = 1 LOCK IN SHARE MODE;
>  ```
>- í•œ Recordì— ëŒ€í•´ ì—¬ëŸ¬ íŠ¸ëœì­ì…˜ì´ ë™ì‹œì— S lockì„ íšë“ ê°€ëŠ¥í•˜ê³ , ë°°íƒ€ ë½ì€ íšë“í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
>- ì˜ˆë¥¼ ë“¤ì–´, íŠ¸ëœì­ì…˜ Aê°€ 1í–‰(ë ˆì½”ë“œ)ì— ëŒ€í•˜ì—¬ ê³µìœ  ë½ì„ íšë“í–ˆë‹¤ë©´, íŠ¸ëœì­ì…˜ BëŠ” 1í–‰ì„ ì½ì„ ìˆœ ìˆì§€ë§Œ ìˆ˜ì •ì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë•Œ íŠ¸ëœì­ì…˜ BëŠ” 1í–‰ì— ëŒ€í•´ì„œ ìƒˆë¡œìš´ ê³µìœ  ë½ì„ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>- ê³µìœ  ë½ì´ ì ìš© ì¤‘ì¸ í–‰ì— ëŒ€í•´ íŠ¸ëœì­ì…˜ ë‚´ì— ë°ì´í„° ë³€ê²½ì´ ì¼ì–´ë‚˜ì§€ ì•Šë„ë¡ ë³´ì¥í•´ì¤ë‹ˆë‹¤.
>- ê³µìœ  ë½, ë°°íƒ€ ë½ì˜ ì ê¸ˆ ì˜µì…˜ì€ Auto Commit ì´ ë¹„í™œì„±í™” ë˜ê±°ë‚˜, BEGIN í˜¹ì€ START TRANSACTION ëª…ë ¹ì„ í†µí•´ íŠ¸ëœì­ì…˜ì´ ì‹œì‘ëœ ìƒíƒœì—ì„œë§Œ ì ê¸ˆì´ ìœ ì§€ë©ë‹ˆë‹¤.
>
>### ğŸˆ ë°°íƒ€ ë½(Exclusive Lock, Lock-X)
>- ë ˆì½”ë“œ ë ˆë²¨ì—ì„œ `ì“°ê¸°(Update, Delete)`ì— ëŒ€í•œ ë½ì…ë‹ˆë‹¤.
>  - `SELECT FOR UPDATE` ë¥¼ ì‚¬ìš©í•˜ì—¬ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>  ```sql
>  SELECT * FROM table_name WHERE id = 1 FOR UPDATE;
>  ```
>- ë ˆì½”ë“œì— ëŒ€í•´ ë°°íƒ€ ë½ì„ íšë“í•œ íŠ¸ëœì­ì…˜ì€, ë…ì ì ìœ¼ë¡œ ì½ê¸° ì—°ì‚°ê³¼ ì“°ê¸° ì—°ì‚°ì„ ëª¨ë‘ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
>- ë°°íƒ€ ë½ì´ ê±¸ë ¤ìˆë‹¤ë©´ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì€ ê³µìœ  ë½, ë°°íƒ€ ë½ ë‘˜ ë‹¤ íšë“ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
>
>## ğŸ“Œ 2. ì˜ë„ ë½(Intention Lock)
>- í…Œì´ë¸” ë ˆë²¨ì˜ ë½ ì…ë‹ˆë‹¤. í•˜ìœ„ ë ˆë²¨ì˜ ì„ í–‰ íŠ¸ëœì­ì…˜ì´ ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰ì¤‘ì¸ì§€ ì•Œë¦¼ìœ¼ë¡œì¨, íŠ¸ëœì­ì…˜ì´ ëŒ€ìƒ ë°ì´í„°ì— ì ê¸ˆì„ ê±¸ ìˆ˜ ìˆì„ì§€ ì—†ì„ì§€ë¥¼ ì‹ ì†íˆ íŒë‹¨í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ì ê¸ˆì…ë‹ˆë‹¤.
>  - ì˜ˆë¥¼ ë“¤ì–´, 
>  Aê°€ íŠ¹ì • Recordì— ë°°íƒ€ ë½(x)ì„ ê±¸ê³  Bê°€ í…Œì´ë¸” ì „ì²´ì— ëŒ€í•œ ìˆ˜ì •ì„ í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ë°°íƒ€ ë½ìœ¼ë¡œ ì¸í•´ Aê°€ ì¢…ë£Œë  ë•Œê¹Œì§€ BëŠ” ëŒ€ê¸°í•´ì•¼ í•©ë‹ˆë‹¤.
>  
>   Bê°€ í…Œì´ë¸”ì— ë½ì„ ê±¸ë ¤ê³  í•  ë•Œ ì—¬ë¶€ë¥¼ íŒŒì•…í•´ì•¼ í•©ë‹ˆë‹¤. í…Œì´ë¸” ì „ì²´ Recordì™€ ê´€ë ¨ëœ ë½ì„ ì°¾ì•„ë³´ëŠ” ê²ƒì€ ë§¤ìš° ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.
>  
>   ë”°ë¼ì„œ, ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì‚¬ìš©ì Aê°€ ë¡œìš°ì— ë² íƒ€ ë½(X)ì„ ê±°ëŠ” ì‹œì ì—, í•´ë‹¹ ë¡œìš°ì˜ ìƒìœ„ ê°ì²´ë“¤(ex, í˜ì´ì§€, í…Œì´ë¸”)ì— ëŒ€í•œ ì˜ë„ ë½(IX)ì„ ê±¸ì–´, ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ë” í° ë²”ìœ„ì˜ ìì›ë“¤ì— ëŒ€í•´ ë½ì„ ê±¸ ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.
>  
>- InnoDBì—ì„  í…Œì´ë¸” ë ˆë²¨ì˜ ë½ ê³¼ ë ˆì½”ë“œ ë ˆë²¨ì˜ ë½ì´ ê³µì¡´í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
>>**Intention Shared Lock (IS)**- íŠ¸ëœì­ì…˜ì´ í…Œì´ë¸”ì˜ ê°œë³„ ë ˆì½”ë“œì— ê³µìœ  ë½ ì„¤ì •
>>**Intention Exclusive Lock (IX)**- íŠ¸ëœì­ì…˜ì´ í…Œì´ë¸”ì˜ ê°œë³„ ë ˆì½”ë“œì— ë² íƒ€ ë½ ì„¤ì •
>
>- ì•„ë˜ëŠ” Share lock, Exclusive lock, Intention lockì´ ê°ê° ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ì‚¬ìš©ë ë•Œ, ì¶©ëŒ(Conflict, ëŒ€ê¸°ìƒíƒœ ë¹ ì§), ë˜ëŠ” í˜¸í™˜(Compatible, ëŒ€ê¸°ìƒíƒœì— ë¹ ì§€ì§€ ì•ŠìŒ)ì´ ë˜ëŠ”ì§€ì— ëŒ€í•´ ì •ë¦¬ëœ í‘œì´ë‹¤.
>
>|                       |    X     |    IX    |    S     |    IS    |
>| :-------------------- | :------: | :------: | :------: | :------: |
>| Exclusive (X)         | Conflict | Conflict | Conflict | Conflict |
>| Intent Exclusive (IX) | Conflict |    O     | Conflict |    O     |
>| Shared (S)            | Conflict | Conflict |    O     |    O     |
>| Intent Shared (IS)    | Conflict |    O     |    O     |    O     |
>
> ê¸°ë³¸ì ìœ¼ë¡œ í‘œë¥¼ ë³´ë©´ Intention Lock ë¼ë¦¬ì˜ í˜¸í™˜ì´ ê°€ëŠ¥í•˜ê³ , ê³µìœ  ë½ì— ëŒ€í•´ì„  IS ë§Œì´ í˜¸í™˜ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
>## ğŸ“Œ 3. ë ˆì½”ë“œ ë½(Record Lock) 
>- ì´ë¦„ì€ ë ˆì½”ë“œ ë½ì´ì§€ë§Œ, InnoDBì—ì„œëŠ” ë ˆì½”ë“œì˜ ì¸ë±ìŠ¤ì— ë½ì„ ì ìš©ì‹œí‚µë‹ˆë‹¤.
>  ```sql
>  # id = 1ì¸ ë ˆì½”ë“œì— ëŒ€í•´ S-Lock
>  SELECT id FROM tb_1 WHERE id = 1 FOR SHARE; 
>  # id = 1ì¸ ë ˆì½”ë“œì— ëŒ€í•´ X-Lock
>  SELECT id FROM tb_1 WHERE id = 1 FOR UPDATE;
> ```
>  - ë‹¤ìŒ ì˜ˆì‹œì—ì„œ ì¸ë±ìŠ¤ ë ˆì½”ë“œ ë½ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.
>  ```sql
>  # ê²°ê³¼ ê°’ì´ 100ê°œ
>  SELECT COUNT(*) FROM tb_1 WHERE index_column > 3;
>  
>  # ê²°ê³¼ ê°’ì´ 1ê°œ
>  SELECT COUNT(*) FROM tb_1 WHERE index_column > 3 and normal_column = 1;
>  
>  # ë ˆì½”ë“œ ë½ì€ ì¸ë±ìŠ¤ ì»¬ëŸ¼ ê¸°ì¤€ìœ¼ë¯€ë¡œ 100ê°œê°€ ê±¸ë¦¼.
>  UPDATE tb_1 SET some_column = 2 WHERE index_column > 3 and normal_column = 1;
> ```
>  ì´ë ‡ê²Œ ëœë‹¤ë©´ `WHERE index_column > 3` ì´ í¬í•¨ëœ ì“°ê¸° ì‘ì—…ì€ ëª¨ë‘ ëŒ€ê¸°ê°€ ê±¸ë¦¬ê²Œ ë©ë‹ˆë‹¤.
>  - ê·¸ëŸ¬ë©´ ì™œ InnoDBëŠ” ì¸ë±ìŠ¤ì— ë½ì„ ì ìš©ì‹œí‚¬ê¹Œìš”?
>    -  B+tree ì¸ë±ìŠ¤ ìë£Œêµ¬ì¡°ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê²€ìƒ‰í•˜ëŠ”ë°, ì´ë•Œ íŠ¹ì • ë°ì´í„°ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì¸ë±ìŠ¤ ë ˆì½”ë“œë¥¼ íƒìƒ‰í•´ì•¼ ë˜ê¸° ë•Œë¬¸ì— í•„ìš”í•©ë‹ˆë‹¤.
>    - ì¸ë±ìŠ¤ì— ëŒ€í•´ì„œë§Œ ë½ì„ ì ìš©í•˜ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ê³¼ ì¶©ëŒì´ ìµœì†Œí™”ë©ë‹ˆë‹¤.
>    
>- ë§Œì•½ í…Œì´ë¸”ì— ì¡°ê±´ì— ë§ëŠ” ì¸ë±ìŠ¤ê°€ ì—†ë‹¤ë©´, í…Œì´ë¸” ë ˆì½”ë“œë¥¼ í’€ìŠ¤ìº”í•˜ê³  ì „ì²´ ë ˆì½”ë“œì— ë ˆì½”ë“œ ë½ì„ ì ìš©í•©ë‹ˆë‹¤.
>
>## ğŸ“Œ 4. ê°­ ë½(Gap Lock)
>
>- ë ˆì½”ë“œì™€ ë ˆì½”ë“œ ì‚¬ì´ì˜ ê°„ê²©ì„ ì ê¸ˆí•©ë‹ˆë‹¤.
>-  ì²« ë²ˆì§¸ ë ˆì½”ë“œ ì•(Negative Infinity) ê³¼ ë§ˆì§€ë§‰ ë ˆì½”ë“œ ë’¤(Positive Infinity)ì— ê°€ìƒì˜ ë ˆì½”ë“œê°€ ìˆë‹¤ê³  ê°€ì •í•˜ê³  ìƒì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê°€ìƒ ë ˆì½”ë“œë¥¼ 'Supremum' ê°€ìƒ ë ˆì½”ë“œë¼ê³  í•©ë‹ˆë‹¤.
>- Gap lockì„ í†µí•´ì„œ ê°™ì€ SELECT ì¿¼ë¦¬ë¥¼ ë‘ë²ˆ ì‹¤í–‰í–ˆì„ ë•Œ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ ë°ì´í„°ê°€ ìˆ˜ì •ë˜ì—ˆë”ë¼ë„ ê°™ì€ ê²°ê³¼ê°€ ë¦¬í„´ë˜ëŠ” ê²ƒì„ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Phantom read ë°©ì§€)
>ì˜ˆ) SELECT id FROM t WHERE id BETWEEN 10 and 20 FOR UPDATE
>ìœ„ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ë©´ ì—ì„œ c1=10~20 ì‚¬ì´ì— Xë½ì´ ê±¸ë¦¬ê¸°ë•Œë¬¸ì— ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì—ì„œ c1=15ë¥¼ ê°€ì§€ëŠ” ë°ì´í„°ë¥¼ INSERTí•˜ë ¤ë©´ ëŒ€ê¸° ìƒíƒœë¡œ ë¹ ì§„ë‹¤.
>
>- ê²©ë¦¬ ë ˆë²¨ì„ "READ COMMITTED"ë¥¼ ì‚¬ìš©í•˜ë©´ Phantom Readê°€ í•´ê²°ë˜ê¸° ë•Œë¬¸ì— Gap Lockì€ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
>
>- ì»¬ëŸ¼ì— ëŒ€í•œ WHERE ì ˆë¡œ ë§ì€ rowë“¤ì„ ì œì™¸ì‹œí‚¤ê³  í•˜ë‚˜ì˜ ë ˆì½”ë“œë§Œ ì¶”ì¶œë˜ì—ˆì„ë•Œ, Record lockê³¼ Gap lock ì–´ëŠê²ƒì´ ì‚¬ìš©ë ê¹Œ?
>  - ê¸°ë³¸ì ìœ¼ë¡œ ì»¬ëŸ¼ì— unique indexê°€ ê±¸ë ¤ ìˆë‹¤ë©´ record lockì´ ì‚¬ìš©ë©ë‹ˆë‹¤.
>  - ì¸ë±ìŠ¤ê°€ ì—†ëŠ” ì»¬ëŸ¼ì´ë‚˜ not unique ì¸ë±ìŠ¤ëŠ” gap lockì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
>  
>
>## ğŸ“Œ 5. ë„¥ìŠ¤íŠ¸ í‚¤ ë½(Next Key Lock)
>- ê°­ ë½(Gap Lock) ê³¼ ë ˆì½”ë¥´ ë½(Record Lock)ì´ í•©ì³ì§„ ë½ì…ë‹ˆë‹¤.
>
>- ![](/Users/kimjong-wan/workspace/Blog/TodayILearned/Database/images/MySQL Lock/image-20240225234650466.png)
>
>- ë„¥ìŠ¤íŠ¸ í‚¤ ë½ì˜ ê²½ìš° ë°”ì´ë„ˆë¦¬ ë¡œê·¸ê°€ ê¸°ë¡ë˜ëŠ” ì¿¼ë¦¬ê°€ ë ˆí”Œë¦¬ì¹´ ì„œë²„ì—ì„œ ì‹¤í–‰ë  ë•Œ, Source Serverì˜ ê²°ê³¼ì™€ ì¼ì¹˜í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë¡œê·¸ í¬ë§·ì˜ ê²½ìš° statement, row, mixedë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ”ë°, ì•„ë˜ì™€ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§‘ë‹ˆë‹¤.
>  - statement: ê°€ì¥ ì˜¤ë˜ëœ í¬ë§·, ë°ì´í„° ë³€ê²½ìœ¼ë¡œë¶€í„° ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ì¿¼ë¦¬ë¥¼ ì €ì¥
>  - row : ë³€ê²½ëœ ëª¨ë“  ë ˆì½”ë“œì— ëŒ€í•œ ì •ë³´ ê¸°ë¡
>  - mixed: statement + rowë¥¼ í˜¼í•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²• 
>
> ê¸°ì¡´ì—ëŠ” statement í¬ë§·ì˜ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë³´í¸ì ì´ì—ˆìœ¼ë‚˜, ì´ ê²½ìš° repeatable-read ì´ìƒì˜ ê²©ë¦¬ ìˆ˜ì¤€ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤ëŠ” ì ê³¼ (read-committed ì‚¬ìš© ì‹œ ì‹¤í–‰ ì‹œì ë§ˆë‹¤ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ì„œ) ì¿¼ë¦¬ì˜ ì‹¤í–‰ë§ˆë‹¤ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ëŠ” ê²½ìš° (ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜, í”„ë¡œì‹œì € ì‚¬ìš© ë“±) í•´ë‹¹ ì¿¼ë¦¬ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ì—ˆë‹¤ëŠ” ë‹¨ì ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, ë„¥ìŠ¤íŠ¸ í‚¤ ë½ê³¼ ê°­ ë½ìœ¼ë¡œ ì¸í•´ ë°ë“œë½ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ í¬ë§·ì„ ROW í˜•íƒœë¡œ ë°”ê¿”ì„œ ë½ ìì²´ë¥¼ ì¤„ì´ëŠ” ê²ƒì´ ì¢‹ë‹¤. (MySQL 8.0ë¶€í„°ëŠ” ROW í¬ë§·ì˜ ë°”ì´ë„ˆë¦¬ ë¡œê·¸ê°€ ê¸°ë³¸ì´ë‹¤.)
>
>> **ë°”ì´ë„ˆë¦¬ ë¡œê·¸ë€?**
>> DDL ì´ë‚˜ DML ë¡œ ì¸í•œ ì´ë²¤íŠ¸ë¥¼ ê¸°ë¡í•˜ëŠ” ì´ì§„ íŒŒì¼ì„ ë§í•œë‹¤.
>> (1) Replica ì™€ Source Server ê°„ì˜ ë°ì´í„° Sync ë¥¼ ë§ì¶”ê¸° ìœ„í•´ ì‚¬ìš©
>> (2) ì„œë²„ ì¥ì•  ì‹œ ë°ì´í„°ë¥¼ ë³µêµ¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©
>
>## ğŸ“Œ 6. ì‚½ì… ì˜ë„ ë½(Insert Intention Lock)
>- INSERT êµ¬ë¬¸ì´ ì‹¤í–‰ë  ë•Œ ë¬µì‹œì ìœ¼ë¡œ ì„¤ì •ë˜ëŠ” ì¼ì¢…ì˜ ê°­ ë½ì´ë‹¤.
>- ì—¬ëŸ¬ ê°œì˜ íŠ¸ëœì­ì…˜ì´ ê°­ ë‚´ë¶€ì˜ ì„œë¡œ ë‹¤ë¥¸ ìœ„ì¹˜ì— ì‚½ì…ì„ ì§„í–‰í•˜ë ¤ê³  í•  ë•Œ ëŒ€ê¸° ì—†ì´ ì‹¤í–‰ë˜ë„ë¡ í•˜ëŠ” ê²ƒì´ ëª©ì ì…ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì‚½ì… ì˜ë„ ë½ë“¤ë¼ë¦¬ëŠ” ì¶©ëŒì´ ë°œìƒí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. 
>
>ë§Œì•½ id = 3, 7ì¸ ë ˆì½”ë“œê°€ ìˆì„ ë•Œ íŠ¸ëœì­ì…˜ AëŠ” id = 5ë¥¼, íŠ¸ëœì­ì…˜ BëŠ” id = 4ì„ ì‚½ì…í•˜ëŠ” ìƒí™©ì„ ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.
>![](/Users/kimjong-wan/workspace/Blog/TodayILearned/Database/images/MySQL Lock/image-20240225234650701.png)
>
>ê¸°ë³¸ì ì¸ ê°­ ë½ì„ ê±¸ì—ˆë‹¤ë©´ íŠ¸ëœì­ì…˜ Aê°€ 5ë¥¼ ì‚½ì…í•˜ëŠ” ê³¼ì •ì—ì„œ ì´ì „ ë ˆì½”ë“œì¸ 3 ~ 5 ì‚¬ì´ì— ê°­ ë½ì´ ê±¸ë¦´ ê²ƒì´ë‹¤. ì´ë•Œ, íŠ¸ëœì­ì…˜ Bê°€ id = 4ì„ ì‚½ì…í•˜ë ¤ê³  í–ˆì„ ë•Œ ì´ë¯¸ 3~5 ì‚¬ì´ì— ê°­ë½ì´ ê±¸ë ¤ ìˆê¸° ë•Œë¬¸ì— ì¢…ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•´ì„œ ëŒ€ê¸° ì‹œê°„ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
>
>ë°˜ë©´ì—, ì‚½ì… ì˜ë„ ë½ì„ ê±¸ì—ˆë‹¤ë©´ íŠ¸ëœì­ì…˜ Aê°€ 5ë¥¼ ì‚½ì…í•˜ëŠ” ê³¼ì •ì—ì„œ 3 ~ 5 ì‚¬ì´ì— ì‚½ì… ì˜ë„ ë½ì´ ê±¸ë¦½ë‹ˆë‹¤. ì´ë•Œ, íŠ¸ëœì­ì…˜ Bê°€ id = 4ë¥¼ ì‚½ì…í•˜ë ¤ê³  í•  ë•Œ ì‚½ì… ì˜ë„ ë½ì€ ì¶©ëŒì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ëŒ€ê¸° ì‹œê°„ ì—†ì´ ë°”ë¡œ ì‚½ì…ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. ì‚½ì…ì„ ìœ„í•œ X-Lockì„ ì–»ê¸° ìœ„í•´ ì‚½ì… ì˜ë„ ë½ì„ í†µí•´ì„œ ë¬µì‹œì ìœ¼ë¡œ ë½ì„ ê±¸ì–´ë‘ê²Œ ë©ë‹ˆë‹¤.
>
>## ğŸ“Œ 7. ìë™ ì¦ê°€ ë½(Auto-Increment Lock)
>- ìë™ ì¦ê°€ ë½ì€ MySQL ì—ì„œ AUTO_INCREMENT ì¹¼ëŸ¼ì´ ì‚¬ìš©ë˜ëŠ” í…Œì´ë¸”ì—ì„œ ìë™ ì¦ê°€ ê°’ì„ ì±„ë²ˆí•  ë•Œ ì¤‘ë³µë˜ì§€ ì•Šì€ ê°’ì„ ì±„ë²ˆí•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë½ì…ë‹ˆë‹¤.
>- ìƒˆë¡œìš´ ë ˆì½”ë“œë¥¼ ì €ì¥í•˜ëŠ” ì¿¼ë¦¬ì‹œì—ë§Œ í•„ìš”í•˜ë©°, íŠ¸ëœì­ì…˜ê³¼ëŠ” ë¬´ê´€í•˜ê²Œ INSERT or REPLACE ë¬¸ì¥ì—ì„œ AUTO_INCREMENT ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ìˆœê°„ë§Œ ì ì‹œ ë½ì´ ê±¸ë ¸ë‹¤ ì¦‰ì‹œ í•´ì œë©ë‹ˆë‹¤.
>- ì•„ì£¼ ì§§ì€ ì‹œê°„ ì§€ì†ë˜ê¸° ë•Œë¬¸ì— ê±°ì˜ ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
># ğŸ“’ REFERENCES
>- [[MySQL ê³µì‹ ë¬¸ì„œ - MySQL Lock]](https://dev.mysql.com/doc/refman/8.0/en/innodb-locking.html)
>- [[MySQL êµ¬ì„± ì‚¬ì§„, InnoDB ë½]](https://cl8d.tistory.com/100)
>- [[MySQL ì—”ì§„ Lock, ë°ë“œë½]](https://ksh-coding.tistory.com/124)
>- [[MySQL ë„¤ì„ë“œ ë½ - ìš°ì•„í•œ ê¸°ìˆ  ë¸”ë¡œê·¸]](https://techblog.woowahan.com/2631/)
>- [[MySQL ë„¤ì„ë“œ ë½ - ì •ì˜]](https://velog.io/@this-is-spear/MySQL-Named-Lock)
>- [[ê³µìœ  ë½, ë°°íƒ€ ë½]](https://chanos.tistory.com/entry/MySQL-DB%EC%9D%98-%EB%8F%99%EC%8B%9C%EC%84%B1-%EC%A0%9C%EC%96%B4%EB%A5%BC-%EC%9C%84%ED%95%9C-Lock%EA%B3%BC-MVCC)
>- [[ë„¥ìŠ¤íŠ¸ í‚¤ ë½]](https://www.letmecompile.com/mysql-innodb-lock-deadlock/)
